{"version":3,"sources":["webpack:///./src/views/Search.vue","webpack:///./src/views/Search.vue?7143","webpack:///./src/views/Search.vue?c3b8"],"names":["class","$router","back","iconName","type","searchKey","placeholder","saveKeyword","keywordList","item","index","historySearch","key","topSearch","$event","topList","top","searchWord","iconUrl","src","alt","showTopList","songs","addMusic","name","getArtists","artists","album","showMoreRes","lastSearch","data","offset","created","localStorage","getItem","console","log","JSON","parse","result","components","Icon","methods","event","target","getAttribute","parseInt","this","concat","indexOf","splice","unshift","length","pop","setSearchSongs","keyword","list","al","picUrl","artist","img1v1Url","ar","$store","commit","dispatch","playlist","state","playIndex","names","map","join","beforeUnmount","setItem","stringify","computed","render","__scopeId"],"mappings":"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","file":"js/chunk-3bb6c9d7.55fa3a32.js","sourcesContent":["<template>\r\n  <div class=\"search\">\r\n    <div class=\"SearchTop\">\r\n      <div class=\"SearchTopNav\">\r\n        <div class=\"back\"\r\n             @click=\"$router.back()\">\r\n          <icon iconName='icon-fanhuizuojiantou'></icon>\r\n        </div>\r\n        <div class=\"right\">\r\n          <input type=\"text\"\r\n                 v-model=\"searchKey\"\r\n                 :placeholder=\"placeholder\"\r\n                 @keydown.enter=\"saveKeyword()\">\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"occupy\">\r\n      </div>\r\n\r\n      <div class=\"history\">\r\n        <div class=\"historyLeft\">\r\n          历史\r\n        </div>\r\n        <div class=\"historyRight\">\r\n          <div @click='historySearch(item)'\r\n               class=\"keyword\"\r\n               v-for=\"(item, index) in keywordList\"\r\n               :key=\"index\">{{item}}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- <div class=\"search-music-top\">\r\n      <div class=\"left\">\r\n        <icon iconName=\"icon-bofang\"></icon>\r\n        <div class=\"text\">\r\n          <div class=\"title\">\r\n            播放全部\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <button class=\"right\">\r\n        <icon iconName='icon-xuanze-duoxuan-tianchong'></icon>\r\n      </button>\r\n    </div> -->\r\n\r\n    <header v-show=\"showTopList\"\r\n            class=\"topList\">\r\n      <main @click=\"topSearch($event)\">\r\n        <div :index='index'\r\n             class=\"top\"\r\n             v-for=\"(top, index) in topList\"\r\n             :key=\"index\">\r\n          <div :index='index'\r\n               class=\"index\">\r\n            {{index +  1}}\r\n          </div>\r\n          <div :index='index'\r\n               class=\"searchWord\">\r\n            {{top.searchWord}}\r\n          </div>\r\n          <img :index='index'\r\n               v-if='top.iconUrl !== \"\"'\r\n               :src=\"top.iconUrl\"\r\n               alt=\"\">\r\n        </div>\r\n      </main>\r\n    </header>\r\n\r\n    <div v-show=\"!showTopList\"\r\n         class=\"list\">\r\n      <div class=\"playItem\"\r\n           v-for=\"(item, index) in songs\"\r\n           :key=\"index\">\r\n        <div class=\"left\"\r\n             @click=\"addMusic(item, index)\">\r\n          <div class=\"index\">\r\n            {{index + 1}}\r\n          </div>\r\n          <div class=\"content\">\r\n            <div class=\"title\">{{item.name}}</div>\r\n            <div class=\"author\">\r\n              <!-- <span class=\"tag\">\r\n                {{list.tags[0]}}\r\n              </span> -->\r\n              {{getArtists(item.artists, item.album)}}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"right\">\r\n          <icon iconName='icon-bofang'></icon>\r\n          <icon iconName='icon-liebiao1'></icon>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"next\"\r\n         @click=\"showMoreRes()\">\r\n      <div v-show=\"lastSearch !== ''\"\r\n           class=\"more\">\r\n        点击获得更多\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { searchMusic, getSearchHot } from '@/api/index.js';\r\nimport Icon from '@/components/Icon.vue';\r\nimport { mapMutations } from 'vuex';\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      songs: [],\r\n      placeholder: 'wandy',\r\n      keywordList: [],\r\n      searchKey: '',\r\n      lastSearch: '',\r\n      showTopList: true,\r\n      topList: [],\r\n      offset: 0\r\n    }\r\n  },\r\n  async created () {\r\n    if (localStorage.getItem('keywordList')) {\r\n      console.log(localStorage.getItem('keywordList'));\r\n      this.keywordList = JSON.parse(localStorage.getItem('keywordList'));\r\n    }\r\n\r\n    let result = await getSearchHot();\r\n    console.log(result);\r\n    this.topList = result.data.data;\r\n  },\r\n  components: {\r\n    Icon\r\n  },\r\n  methods: {\r\n    topSearch (event) {\r\n      let target = event.target;\r\n      let index = target.getAttribute('index');\r\n      console.log(index);\r\n      if (index) {\r\n        index = parseInt(index);\r\n        console.log([event.target], index);\r\n        this.searchKey = this.topList[index].searchWord;\r\n        this.saveKeyword();\r\n      }\r\n    },\r\n    async showMoreRes () {\r\n      let result = await searchMusic(this.lastSearch, ++this.offset);\r\n      this.songs = this.songs.concat(result.data.result.songs);\r\n    },\r\n    async saveKeyword () {\r\n      if (this.searchKey) {\r\n        this.showTopList = false;\r\n        console.log(this.searchKey);\r\n        let index = this.keywordList.indexOf(this.searchKey);\r\n        if (index !== -1) {\r\n          this.keywordList.splice(index, 1);\r\n        }\r\n        this.keywordList.unshift(this.searchKey);\r\n        if (this.keywordList.length > 10) {\r\n          this.keywordList.pop();\r\n        }\r\n        console.log(this.keywordList);\r\n\r\n        let result = await searchMusic(this.searchKey);\r\n        this.lastSearch = this.searchKey;\r\n        this.searchKey = '';\r\n        this.offset = 0;\r\n        console.log(result);\r\n        this.setSearchSongs(result.data.result.songs);\r\n      }\r\n    },\r\n\r\n    async historySearch (keyword) {\r\n      this.searchKey = keyword;\r\n      this.saveKeyword();\r\n    },\r\n\r\n    setSearchSongs (list) {\r\n      this.songs = list;\r\n      console.log(this.songs)\r\n    },\r\n\r\n    ...mapMutations(\r\n      ['setPlayIndex', 'setPlaylist']\r\n    ),\r\n\r\n    addMusic (item) {\r\n      console.log(item);\r\n      item.al = item.album;\r\n      item.al.picUrl = item.al.artist.img1v1Url;\r\n      item.ar = item.artists;\r\n      this.$store.commit('pushMusic', item);\r\n      this.$store.dispatch('changeMusic', {\r\n        playlist: this.$store.state.playlist,\r\n        playIndex: this.$store.state.playlist.length - 1\r\n      });\r\n    },\r\n\r\n    getArtists (artists, album) {\r\n      let names = artists.map((item) => item.name).join(', ');\r\n      if (album && album.name) {\r\n        names += ' - ' + album.name\r\n      }\r\n      return names;\r\n    }\r\n  },\r\n  beforeUnmount () {\r\n    if (this.keywordList) {\r\n      localStorage.setItem('keywordList', JSON.stringify(this.keywordList));\r\n    }\r\n  },\r\n  computed: {\r\n\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search {\r\n  width: 100%;\r\n  height: calc(100vh - 1.2rem);\r\n  padding: 0.2rem 0.4rem 0 0.4rem;\r\n  // background-color: rgb(36, 36, 36);\r\n  border-top-left-radius: 0.3rem;\r\n  border-top-right-radius: 0.3rem;\r\n  overflow: auto;\r\n  color: white;\r\n\r\n  .topList {\r\n    width: 6.8rem;\r\n    background-color: rgb(88, 88, 88);\r\n    border-radius: 0.2rem;\r\n    margin: 0.2rem auto;\r\n    padding: 0.5rem 0 0.4rem 0.3rem;\r\n    main {\r\n      font-size: 0.3rem;\r\n      display: grid;\r\n      grid-template-columns: repeat(2, 3.1rem);\r\n      row-gap: 0.2rem;\r\n      // align-items: center;\r\n      // justify-items: center;\r\n      .top {\r\n        display: flex;\r\n        align-items: center;\r\n        margin-right: 0.2rem;\r\n        .index {\r\n          flex-shrink: 0;\r\n          width: 0.4rem;\r\n          margin-right: 0.2rem;\r\n        }\r\n        .searchWord {\r\n          overflow: hidden;\r\n          white-space: nowrap;\r\n          text-overflow: ellipsis;\r\n          margin-right: 0.2rem;\r\n        }\r\n\r\n        img {\r\n          height: 0.3rem;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .SearchTop {\r\n    width: 100%;\r\n    padding: 0 0.4rem;\r\n\r\n    .SearchTopNav {\r\n      display: flex;\r\n      width: 7.5rem;\r\n      height: 1.2rem;\r\n      align-items: center;\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      padding: 0.2rem;\r\n      background-color: rgb(88, 88, 88);\r\n\r\n      .icon {\r\n        width: 0.45rem;\r\n        height: 0.45rem;\r\n        fill: white;\r\n      }\r\n\r\n      .right {\r\n        padding: 0 0 0 0.4rem;\r\n        flex: 1;\r\n\r\n        input {\r\n          border: none;\r\n          outline: none;\r\n          font-size: 0.45rem;\r\n          border-bottom: 1px solid rgb(66, 66, 66);\r\n          width: 100%;\r\n          color: white;\r\n          background-color: transparent;\r\n        }\r\n      }\r\n    }\r\n\r\n    .occupy {\r\n      height: 1.2rem;\r\n    }\r\n\r\n    .history {\r\n      display: flex;\r\n      font-size: 0.3rem;\r\n      align-items: center;\r\n\r\n      .historyLeft {\r\n        width: 1.2rem;\r\n        height: 0.8rem;\r\n        font-weight: 900;\r\n        line-height: 0.8rem;\r\n      }\r\n\r\n      .historyRight {\r\n        color: #666;\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        flex: 1;\r\n        .keyword {\r\n          background-color: rgb(88, 88, 88);\r\n          height: 0.6rem;\r\n          color: white;\r\n          padding: 0 0.2rem;\r\n          border-radius: 0.4rem;\r\n          line-height: 0.6rem;\r\n          margin: 0.1rem 0.1rem;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .search-music-top {\r\n    width: 100%;\r\n    height: 1rem;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n\r\n    .left {\r\n      display: flex;\r\n      align-items: center;\r\n      .icon {\r\n        width: 0.6rem;\r\n        height: 0.6rem;\r\n      }\r\n      .title {\r\n        font-size: 0.34rem;\r\n        font-weight: 900;\r\n      }\r\n\r\n      .num {\r\n        font-size: 0.24rem;\r\n        color: #ccc;\r\n      }\r\n      .text {\r\n        display: flex;\r\n        align-items: center;\r\n        margin-left: 0.2rem;\r\n      }\r\n    }\r\n\r\n    .right {\r\n      font-size: 0.24rem;\r\n      margin: 0;\r\n      padding: 0;\r\n      border: none; //自定义边框\r\n      outline: none; //消除默认点击蓝色边框效果\r\n      background-color: transparent;\r\n      .icon {\r\n        width: 0.5rem;\r\n        height: 0.5rem;\r\n        fill: black;\r\n      }\r\n    }\r\n  }\r\n\r\n  .list {\r\n    background-color: rgb(88, 88, 88);\r\n    border-radius: 0.2rem;\r\n    margin-top: 0.4rem;\r\n    padding: 0.2rem;\r\n    .playItem {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      height: 1.2rem;\r\n      .left {\r\n        display: flex;\r\n        align-items: center;\r\n        color: rgb(148, 146, 146);\r\n        .index {\r\n          width: 0.3rem;\r\n          font-size: 0.3rem;\r\n        }\r\n        .content {\r\n          margin-left: 0.4rem;\r\n          width: 4.2rem;\r\n          .title {\r\n            overflow: hidden;\r\n            white-space: nowrap;\r\n            text-overflow: ellipsis;\r\n            color: white;\r\n            font-size: 0.3rem;\r\n            font-weight: 600;\r\n            margin-bottom: 0.1rem;\r\n          }\r\n          .author {\r\n            font-size: 0.24rem;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n            height: 0.4rem;\r\n\r\n            .tag {\r\n              font-size: 0.05rem;\r\n              color: red;\r\n              border: 1px solid orangered;\r\n              border-radius: 0.05rem;\r\n              margin-right: 0.03rem;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      .right {\r\n        display: flex;\r\n        align-items: center;\r\n        .icon {\r\n          margin-right: 0.2rem;\r\n          width: 0.4rem;\r\n          height: 0.4rem;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .next {\r\n    text-align: center;\r\n    .more {\r\n      font-size: 0.35rem;\r\n      color: grey;\r\n      width: 4rem;\r\n      margin: 0.2rem auto;\r\n      // border: 1px solid black;\r\n      border-radius: 0.2rem;\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./Search.vue?vue&type=template&id=3f4937de&scoped=true\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=3f4937de&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3f4937de\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Search.vue?vue&type=style&index=0&id=3f4937de&lang=less&scoped=true\""],"sourceRoot":""}