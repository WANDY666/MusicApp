(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f62ab4d"],{3681:function(t,e,n){},"47e6":function(t,e,n){"use strict";n("3681")},"7e93":function(t,e,n){"use strict";n.r(e);n("b0c0");var c=n("7a23"),s=n("f1c7"),a=n.n(s);Object(c["w"])("data-v-3fd8e875");var i={class:"ListSquare"},r={class:"loading",src:a.a},o=Object(c["g"])("div",{class:"title"}," 歌单广场 ",-1),l=["index"],u={ref:"real",class:"real"},h=["src"],d={class:"name"},f={class:"count"};function g(t,e,n,s,a,g){var b=Object(c["A"])("icon"),p=Object(c["A"])("router-link");return Object(c["t"])(),Object(c["f"])("div",i,[Object(c["I"])(Object(c["g"])("img",r,null,512),[[c["F"],a.showLoading]]),Object(c["g"])("header",null,[Object(c["g"])("div",{class:"back",onClick:e[0]||(e[0]=function(e){return t.$router.back()})},[Object(c["i"])(b,{iconName:"icon-fanhuizuojiantou"}),o])]),Object(c["g"])("nav",{ref:"nav",onClick:e[1]||(e[1]=function(t){return g.switchTag(t)})},[(Object(c["t"])(!0),Object(c["f"])(c["a"],null,Object(c["z"])(a.hotPlaylistTags,(function(t,e){return Object(c["t"])(),Object(c["f"])("span",{index:e,class:Object(c["o"])({active:e===a.currentIndex}),key:t.id},Object(c["C"])(t.name),11,l)})),128))],512),Object(c["g"])("main",{ref:"main",onTouchstart:e[3]||(e[3]=function(){return g.touchstart&&g.touchstart.apply(g,arguments)}),onTouchmove:e[4]||(e[4]=function(){return g.touchmove&&g.touchmove.apply(g,arguments)}),onTouchend:e[5]||(e[5]=function(){return g.touchend&&g.touchend.apply(g,arguments)})},[Object(c["g"])("div",u,[(Object(c["t"])(!0),Object(c["f"])(c["a"],null,Object(c["z"])(a.lists,(function(t,n){return Object(c["t"])(),Object(c["f"])("section",{key:t.id},[Object(c["g"])("article",{onScroll:e[2]||(e[2]=function(){return g.scrollSection&&g.scrollSection.apply(g,arguments)})},[(Object(c["t"])(!0),Object(c["f"])(c["a"],null,Object(c["z"])(t.playlists,(function(t,e){return Object(c["t"])(),Object(c["d"])(p,{to:{path:"/listview",query:{id:t.id}},class:"card",key:t.id},{default:Object(c["H"])((function(){return[Object(c["g"])("img",{src:t.coverImgUrl,alt:"list.name"},null,8,h),Object(c["g"])("div",d,Object(c["C"])(t.name),1),Object(c["g"])("div",f,[Object(c["i"])(b,{iconName:"icon-play"}),Object(c["h"])(" "+Object(c["C"])(g.playCount(t.playCount)),1)])]})),_:2},1032,["to"])})),128))],32)])})),128))],512)],544)])}Object(c["u"])();var b=n("1da1"),p=(n("96cf"),n("4de4"),n("159b"),n("99af"),n("ac1f"),n("466d"),n("b680"),n("cdae")),m=n("365c"),j={components:{Icon:p["a"]},data:function(){return{hotPlaylistTags:[],currentIndex:0,touchstartX:0,touchstartY:0,showLoading:!1,lastLocation:0,scrollId:0,distanceX:0,distanceY:0,scrollSectionId:0,lists:[]}},created:function(){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["j"])();case 2:n=e.sent,console.log(n),t.hotPlaylistTags=n.data.tags.filter((function(t){return t.name.length<4})),t.hotPlaylistTags.forEach(function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(n,c){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.lists[c]={offset:0,limit:12,tag:n.name},e.next=3,Object(m["m"])({limit:t.lists[c].limit,offset:t.lists[c].offset++,tag:t.lists[c].tag});case 3:s=e.sent,t.lists[c].playlists=s.data.playlists;case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})))()},methods:{scrollSection:function(t){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:0!==e.scrollSectionId&&clearTimeout(e.scrollSectionId),e.scrollSectionId=setTimeout(Object(b["a"])(regeneratorRuntime.mark((function n(){var c,s,a,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(c=t.target,s=c.scrollHeight,a=c.scrollTop,i=c.clientHeight,!(s-60<=a+i)){n.next=13;break}return e.showLoading=!0,n.next=8,Object(m["m"])({limit:e.lists[e.currentIndex].limit,offset:e.lists[e.currentIndex].limit*e.lists[e.currentIndex].offset++,tag:e.lists[e.currentIndex].tag});case 8:r=n.sent,e.showLoading=!1,console.log(r.data.playlists),e.lists[e.currentIndex].playlists=e.lists[e.currentIndex].playlists.concat(r.data.playlists),setTimeout((function(){c.scrollTo({top:c.scrollTop+100,behavior:"smooth"})}),0);case 13:e.scrollSectionId=0;case 14:case"end":return n.stop()}}),n)}))),20);case 2:case"end":return n.stop()}}),n)})))()},touchstart:function(t){console.log("touchstart"),this.$refs.real.style.transition="none",this.touchstartX=t.targetTouches[0].pageX,this.touchstartY=t.targetTouches[0].pageY,this.lastLocation=parseFloat(getComputedStyle(this.$refs.real).getPropertyValue("left").match(/[+-]?[0-9]+/)[0])},touchmove:function(t){this.distanceX=t.targetTouches[0].pageX-this.touchstartX,this.distanceY=t.targetTouches[0].pageY-this.touchstartY,2*Math.abs(this.distanceY)<Math.abs(this.distanceX)&&(this.$refs.real.style.left=this.lastLocation+this.distanceX+"px")},touchend:function(){2*Math.abs(this.distanceY)<Math.abs(this.distanceX)?(this.$refs.real.style.transition="left 0.3s ease-out",this.distanceX<0?this.switchTo(Math.min(this.currentIndex+1,this.lists.length-1)):this.switchTo(Math.max(0,this.currentIndex-1))):this.switchTo(this.currentIndex)},playCount:function(t){var e=t;return t>=1e8?(e=t/1e8,e=e.toFixed(2)+"亿"):t>=1e4&&(e=t/1e4,e=e.toFixed(2)+"万"),e},switchTo:function(t){var e=this.$refs.nav,n=e.clientWidth,c=e.scrollLeft;this.currentIndex=t;var s=e.children[t].offsetLeft;console.log(n,c,s),e.scrollTo({left:s-151,behavior:"smooth"}),this.$refs.real.style.left="-".concat(t*this.$refs.main.clientWidth,"px"),console.log("switch "+t)},switchTag:function(t){if("SPAN"===t.target.tagName){var e=t.target;this.switchTo(parseInt(e.getAttribute("index")))}}}};n("47e6");j.render=g,j.__scopeId="data-v-3fd8e875";e["default"]=j},f1c7:function(t,e,n){t.exports=n.p+"img/loading.12def9b0.gif"}}]);
//# sourceMappingURL=chunk-5f62ab4d.b9436c06.js.map